<!DOCTYPE html>
<html>
<head>
    <title>Заметки на странице</title>
</head>
<body>
    <h1>Заметки на странице</h1>

    <div id="notesContainer">
        <div class="note">
            <p>Это первая строка текста1.</p>
            <textarea class="note-input" placeholder="Введите заметку"></textarea>
            <button class="note-button">Сохранить</button>
            <div class="note-text"></div>
        </div>

        <div class="note">
            <p>Это вторая строка текста.</p>
            <textarea class="note-input" placeholder="Введите заметку"></textarea>
            <button class="note-button">Сохранить</button>
            <div class="note-text"></div>
        </div>

        <!-- Повторите блок .note для каждой строки текста -->
    </div>

    <script>
        const CLIENT_ID = '579011393870-5tucmv1mnghemvgm8d0oq2j6gid7pmqf.apps.googleusercontent.com';
        const API_KEY = 'AIzaSyCTz5JY4g1eosz5DN5Qa4Mg6gKA10v0XK8';
        const DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"];
        const SCOPES = 'https://www.googleapis.com/auth/drive.file';

        const notes = document.querySelectorAll('.note');
        gapi.load('client:auth2', initClient);

        function initClient() {
            gapi.client.init({
                apiKey: API_KEY,
                clientId: CLIENT_ID,
                discoveryDocs: DISCOVERY_DOCS,
                scope: SCOPES
            }).then(() => {
                notes.forEach(note => {
                    const textarea = note.querySelector('.note-input');
                    const button = note.querySelector('.note-button');
                    const noteText = note.querySelector('.note-text');

                    button.addEventListener('click', () => {
                        const newNote = document.createElement('p');
                        newNote.textContent = `Заметка: ${textarea.value}`;
                        noteText.appendChild(newNote);
                        textarea.value = '';

                        saveNoteToDrive(newNote.textContent);
                    });
                });
            });
        }

        function saveNoteToDrive(note) {
            gapi.client.drive.files.create({
                resource: {
                    name: 'note.txt',
                    mimeType: 'text/plain'
                },
                media: {
                    mimeType: 'text/plain',
                    body: note
                }
            }).then(response => {
                console.log('Заметка сохранена на Google Drive:', response);
            }).catch(error => {
                console.error('Произошла ошибка при сохранении заметки:', error);
            });
        }
    </script>
    <script src="https://apis.google.com/js/api.js"></script>
</body>
</html>
